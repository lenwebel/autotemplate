{"version":3,"file":"core.js","sourceRoot":"","sources":["../ts/core.ts"],"names":[],"mappings":"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","sourcesContent":["\ndeclare var pages: page;\n\ninterface pageConfiguration {\n    getData: string;\n    postData: string;\n    template: Array<any>;\n}\n\ninterface page {\n    pageName: string;\n    configuration: pageConfiguration;\n}\n\nclass coreElement {\n\n    constructor(element: string, makeFunction: any) {\n        this.element = element;\n        this.makeFunction = makeFunction;\n    }\n\n    element: string;\n    makeFunction: any;\n}\n\nclass core {\n    private _elementMap: Array<coreElement>;\n    private _pages: Array<page>;\n\n    private static _excludedAttributes: Array<string> = [\n        'includeLabel',\n        'label',\n        'element',\n        'parentElement'\n    ];\n\n    constructor(pages: any) {\n        this._pages = pages;\n        this.init();\n\n    }\n\n    private initElementMap(): void {\n        this._elementMap = new Array<coreElement>();\n        this._elementMap.push(new coreElement(\"select\", core.makeSelect));\n        this._elementMap.push(new coreElement(\"text\", core.makeText));\n        this._elementMap.push(new coreElement(\"div\", core.makeDiv));\n    }\n\n    public getElementMaker(elementName: string): Function {\n        var makeElement = this._elementMap.filter((o) => {\n            if (elementName) {\n                console.log(elementName);\n                return o.element.toLowerCase() === elementName.toLowerCase();\n            } [0]\n            return false;\n        });\n\n        if (!makeElement[0]) {\n            return (a: any) => { return core.makeDiv(a); };\n        }\n        return makeElement[0].makeFunction;\n    }\n\n    public createElement(element: any): HTMLElement {\n        let result: HTMLElement;\n\n        //result = this.evalHierarchicalElements(element.parentElement, element.childElement,element)\n        result = this.evalHierarchicalElements(element,null);\n        return result;\n    }\n\n    private evalHierarchicalElements(element:any,currentHTMLElement:HTMLElement){\n        \n        var nElement = this.varToElement(element);\n        \n        if(currentHTMLElement){\n           \n            if(!nElement || !this.isHTMLElement(nElement)){\n                return currentHTMLElement;\n            }\n            \n            nElement.appendChild(currentHTMLElement);\n         }\n\n        if(element.parentElement){\n            currentHTMLElement =  this.evalHierarchicalElements(element.parentElement,nElement);\n        }else{\n            currentHTMLElement = nElement;\n        }\n\n\n        if(!currentHTMLElement){\n            return nElement;\n        }\n            return currentHTMLElement;\n        \n    }\n\n    private varToElement(element: any): HTMLElement {\n\n        if(this.isHTMLElement(element)){return element;}\n\n        if (element && typeof element === 'object') {\n             var makeElement = this.getElementMaker(element.element);\n             element = makeElement(element);\n        }\n\n        if (element && typeof element === 'string') {\n            let e = document.getElementById(element);\n            if(!e){\n                console.warn(\"element with ID:'\", element,\"'could not be found, i will create a div element and append it to the document body\")\n                var d = document.createElement('div')\n                    d.innerHTML = element;\n                       document.getElementsByTagName('body')[0].appendChild(d);\n                       \n                }\n        }\n        return element;\n\n    }\n\n    public init() {\n        this._pages.forEach((page) => console.log(\"page:\", page.pageName, page.configuration));\n\n        var p = this._pages;\n        this.initElementMap();\n\n        this._pages.forEach((page) => { // process each pagetemplate.\n            this.processPageTemplate(page, (field: any) => {\n                field.HTMLElement = this.createElement(field);\n            });\n        });\n\n        //////// this is throw away code - just testing the output.\n\n        let div = document.createElement('div');\n\n        this.processPageTemplate(this._pages[0], (field: any) => {\n            div.appendChild(field.HTMLElement);\n        });\n\n        document.body.appendChild(div);\n\n        ////////////////////////////////////////////////////////////\n    }\n\n\n    public processPageTemplate(template: page, fctn: Function) {\n        template.configuration.template.forEach((field) => fctn(field));\n    }\n\n    public static makeSelect(attributes: any): HTMLSelectElement {\n        var select = document.createElement('select')\n        core.attributeHelper(select, attributes);\n        return select;\n    }\n\n    public static makeDiv(attributes: any): HTMLDivElement {\n        var div = document.createElement('div');\n        core.attributeHelper(div, attributes);\n        return div;\n    }\n\n    public static makeText(attributes: any): HTMLInputElement {\n        var input = document.createElement(\"input\");\n        core.attributeHelper(input, attributes);\n        input.setAttribute(\"type\", \"text\");\n        return input;\n\n    }\n\n    private static excludeAttribute(element: string): boolean {\n        return core._excludedAttributes.indexOf(element) <= 0\n    }\n\n    private static attributeHelper(element: HTMLElement, attributes: any) {\n        var _attr = attributes;\n        var _ele = element;\n        Object.keys(attributes).forEach((property, value) => {\n            if (core.excludeAttribute(property)) {\n                _ele.setAttribute(property, _attr[property])\n            }\n\n        });\n    }\n\n    private isHTMLElement(element:any){\n        return  element && element instanceof HTMLElement;\n    }\n\n}\n\n\nvar t = new core(pages);"]}